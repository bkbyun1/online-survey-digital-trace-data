(this["webpackJsonpdigital-trace-data"]=this["webpackJsonpdigital-trace-data"]||[]).push([[0],{38:function(e,t,s){},61:function(e,t,s){},80:function(e,t,s){"use strict";s.r(t);var n=s(2),a=s(1),i=s.n(a),c=s(20),r=s.n(c),o=(s(61),s(28)),l=s(27),d=s.n(l),h=s(30),u=s(22),m=s(23),j=s(24),p=s(26),b=s(25),g=s(54),O=s(6),v=s(42);s(81);v.a.initializeApp({apiKey:"AIzaSyCkJZaaXU2FqdsvHOhfCwSyQAmBl96GjAQ",authDomain:"tier1-testing.firebaseapp.com",projectId:"tier1-testing",storageBucket:"tier1-testing.appspot.com",messagingSenderId:"1046739624981",appId:"1:1046739624981:web:26ddf0d0a3a19ad0e5da1c",measurementId:"G-B5RW7FTVVQ"});var x=v.a,f=s(32),y=(s(38),s(18)),S=s(34),A=s(15),w=s(33);function N(e){var t=e.sectionName,s=e.recordActivity,i=Object(a.useState)(null),c=Object(w.a)(i,2),r=c[0],o=c[1];function l(e){var t;switch(e.target.name.split("_")[1]){case"upvote":t=0;break;case"circle":t=1;break;case"downvote":t=2}r===t?(o(null),s("click",e.target.name,"un-clicked ".concat(e.target.name," button"))):(o(t),s("click",e.target.name,"clicked ".concat(e.target.name," button")))}return Object(n.jsxs)("div",{className:"vertical",children:[Object(n.jsx)("img",{name:"".concat(t,"_upvote"),src:C(0===r?"upvote_selected":"upvote"),onClick:l,alt:"upvote"}),Object(n.jsx)("img",{name:"".concat(t,"_circle"),src:C(1===r?"circle_selected":"circle"),onClick:l,alt:"question mark"}),Object(n.jsx)("img",{name:"".concat(t,"_downvote"),src:C(2===r?"downvote_selected":"downvote"),onClick:l,alt:"downvote"})]})}var k=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;Object(u.a)(this,s),(n=t.call(this,e)).state={positionList:[]},n.recordActivity=n.props.recordActivity;var a=x.firestore();return n.db=a,n.USER_DATA=a.collection("responseIDs").doc(n.props.qualtricsUserId),n.RESUME_CONTENT=a.collection("resume"),n.APPLICANTS=a.collection("Applicants"),n.collapsibleOpened=n.collapsibleToggled.bind(Object(j.a)(n)),n}return Object(m.a)(s,[{key:"componentDidMount",value:function(){var e=this;this.setState({studyVersion:this.props.studyVersion,resumeVersion:this.props.resumeVersion,permanentAddress:"13 Hope Avenue, Anytown, MI",gender:"Male",citizenshipStatus:"U.S. citizen or U.S. National",hispanicStatus:"No",racialIdentity:"White",fathersEducation:"High school diploma",mothersEducation:"Associate's degree",unweightedGPA:3.95,weightedGPA:4.34,honorsAPClasses:13,courses:[{name:"Statistics",firstSemester:"Full year / first semester",secondSemester:"n/a",thirdTrimester:"n/a"},{name:"AP English Literature",firstSemester:"Full year / first semester",secondSemester:"n/a",thirdTrimester:"n/a"},{name:"AP Chemistry",firstSemester:"Full year / first semester",secondSemester:"n/a",thirdTrimester:"n/a"},{name:"AP US History",firstSemester:"Full year / first semester",secondSemester:"n/a",thirdTrimester:"n/a"},{name:"Spanish 6",firstSemester:"Full year / first semester",secondSemester:"n/a",thirdTrimester:"n/a"}],SAT:{readingWriting:690,math:780},AP:{biology:5,englishLanguage:4}},(function(){e.parseCandidateData((function(){1===e.state.resumeVersion?e.getResume1Values(e.displayValues):e.getResume2Values(e.displayValues)}))}))}},{key:"getResume1Values",value:function(e){var t=Math.random()<.5,s=this.state.applicants[0],n=s.legal_name,a=Math.random()<.5,i=Math.random()<.5?"a":"b",c=Math.random()<.5?"a":"b",r=Math.random()<.5?"a":"b";this.setState({isMan:t,isParent:a,education:i,work1:c,work2:r,name:s.legal_name,college:s.college,major:s.major,school_name:s.school_name,state:s.state},e),this.USER_DATA.set({}),this.USER_DATA.collection("values shown").doc("resume 1").set({isMan:t,isParent:a,education:i,work1:c,work2:r,name:n})}},{key:"getResume2Values",value:function(e){var t=this;this.USER_DATA.collection("values shown").doc("resume 1").get().then((function(s){var n=s.data(),a=n.isMan,i=0===n.nameIndex?1:0,c=a?t.state.maleCandidates[i].name:t.state.femaleCandidates[i].name,r=!n.isParent,o="a"===n.education?"b":"a",l="a"===n.work1?"b":"a",d="a"===n.work2?"b":"a";t.setState({isMan:a,isParent:r,education:o,work1:l,work2:d,name:c,nameIndex:i},e),t.USER_DATA.collection("values shown").doc("resume 2").set({isMan:a,isParent:r,education:o,work1:l,work2:d,name:c,nameIndex:i})}))}},{key:"displayValues",value:function(){var e=this;this.RESUME_CONTENT.doc("misc").get().then((function(t){var s=(e.state.isParent?t.data().nonparent.toString():t.data().parent.toString()).split(".").map((function(e){return e.trim()})).filter(Boolean);e.setState({misc:s})})),this.RESUME_CONTENT.doc("education ".concat(this.state.education)).get().then((function(t){e.setState({degree:t.data().degree}),e.setState({duration:t.data().duration}),e.setState({university:t.data().university})})),this.RESUME_CONTENT.doc("work box 1".concat(this.state.work1)).get().then((function(t){e.addPositionToList(t.data())})),this.RESUME_CONTENT.doc("work box 2".concat(this.state.work1)).get().then((function(t){e.addPositionToList(t.data())}))}},{key:"collapsibleToggled",value:function(e){0===e?this.recordActivity("collapsibleToggled","education","toggled education section "):1===e?this.recordActivity("collapsibleToggled","work","toggled work section "):2===e&&this.recordActivity("collapsibleToggled","misc","toggled misc section ")}},{key:"parseCandidateData",value:function(e){var t=this,s=this.db.collection("Applicants"),n=[];s.get().then((function(e){e.forEach((function(e){n.push(e.data())}))})).then((function(){t.setState({applicants:n},e)})).catch((function(e){console.error("Error getting candidates:",e)}))}},{key:"replaceGenderOptions",value:function(e){var t=this,s=e.match(/\[(.*?)\/(.*?)\]/g);return s?(s.forEach((function(s){var n=s.slice(1,-1).split("/");e=e.replace(s,t.state.isMan?n[0]:n[1])})),e):e}},{key:"addPositionToList",value:function(e){this.setState((function(t){return{positionList:[].concat(Object(f.a)(t.positionList),[e])}}))}},{key:"_onMouseMove",value:function(e){}},{key:"render",value:function(){var e=this;return this.state.positionList.length>0&&this.state.name?Object(n.jsx)("div",{className:"overall",children:Object(n.jsx)("div",{className:"App",onMouseMove:this._onMouseMove.bind(this),children:Object(n.jsxs)("div",{className:"resume",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"header",children:[Object(n.jsx)("span",{style:{fontWeight:"bold"},children:"Applicant #1"}),": ",Object(n.jsx)("span",{children:"Engineering Undeclared"})]}),Object(n.jsx)("div",{className:"header",style:{marginTop:"20px"},children:"Student Information"}),Object(n.jsx)("p",{className:"content",style:{fontWeight:"bold"},children:"Personal Information"}),Object(n.jsxs)("p",{className:"content",children:["Legal name: ",this.state.name]}),Object(n.jsxs)("p",{className:"content",children:["Permanent home address: ",this.state.permanentAddress]}),Object(n.jsx)("p",{className:"content",style:{marginTop:"12px",marginBottom:"12px"}})," ",Object(n.jsx)("p",{className:"content",style:{fontWeight:"bold"},children:"Demographics"}),Object(n.jsxs)("p",{className:"content",children:["Gender: ",this.state.gender]}),Object(n.jsxs)("p",{className:"content",children:["Citizenship status: ",this.state.citizenshipStatus]}),Object(n.jsxs)("p",{className:"content",children:["Hispanic/Latino/a/x: ",this.state.hispanicStatus]}),Object(n.jsxs)("p",{className:"content",children:["Racial identity: ",this.state.racialIdentity]}),Object(n.jsx)("p",{className:"content",style:{marginTop:"12px",marginBottom:"12px"}}),Object(n.jsx)("p",{className:"content",style:{fontWeight:"bold"},children:"Family"}),Object(n.jsxs)("p",{className:"content",children:["Father\u2019s education: ",this.state.fathersEducation]}),Object(n.jsxs)("p",{className:"content",children:["Mother\u2019s education: ",this.state.mothersEducation]})]}),Object(n.jsx)("div",{className:"section",children:Object(n.jsx)("div",{className:"header",style:{marginTop:"20px"},children:"Education"})}),Object(n.jsxs)("div",{className:"section",children:[Object(n.jsx)("div",{className:"content",style:{fontWeight:"bold"},children:"Grades"}),Object(n.jsxs)("p",{className:"content",children:["Cumulative GPA: ",this.state.weightedGPA," (weighted)"]})]}),Object(n.jsxs)("div",{className:"section",children:[Object(n.jsx)("div",{className:"content",style:{marginTop:"12px",fontWeight:"bold"},children:"Courses taken in current or most recent year"}),Object(n.jsx)("p",{className:"content",children:"Statistics, AP English Literature, AP Chemistry, AP US History, Spanish 6"})]}),Object(n.jsxs)("div",{className:"section",children:[Object(n.jsx)("div",{className:"header",style:{marginTop:"20px"},children:"Testing"}),Object(n.jsx)("p",{className:"content",style:{fontWeight:"bold"},children:"SAT"}),Object(n.jsxs)("p",{className:"content",children:["Evidence-Based Reading and Writing: ",this.state.SAT.readingWriting]}),Object(n.jsxs)("p",{className:"content",children:["Mathematics: ",this.state.SAT.math]}),Object(n.jsx)("p",{className:"content",style:{fontWeight:"bold"},children:"AP"}),Object(n.jsxs)("p",{className:"content",children:["Biology: ",this.state.AP.biology]}),Object(n.jsxs)("p",{className:"content",children:["English Language: ",this.state.AP.englishLanguage]})]}),Object(n.jsxs)(y.a,{children:[Object(n.jsxs)(A.a,{children:[Object(n.jsx)(A.a.Header,{style:{background:"white",paddingLeft:0,paddingRight:0},children:Object(n.jsxs)(y.a.Toggle,{as:S.a,style:{color:"black",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontSize:"18px",alignItems:"center"},variant:"link",eventKey:"0",onClick:function(){return e.setState({hsprofileSectionOpened:!e.state.hsprofileSectionOpened},(function(){e.collapsibleToggled(0),e.state.hsprofileSectionOpened&&e.setState({transcriptSectionOpened:!1,activitiesSectionOpened:!1,essaySectionOpened:!1,miscSectionOpened:!1})}))},children:["High School Profile"," ",Object(n.jsx)("img",{id:"toggle_icon",src:this.state.hsprofileSectionOpened?C("minus_icon"):C("plus_icon"),alt:"toggle icon"})]})}),Object(n.jsx)(y.a.Collapse,{eventKey:"0",style:{marginTop:0},children:Object(n.jsx)(A.a.Body,{style:{marginTop:0,paddingTop:0},children:Object(n.jsx)("div",{className:"votingblock",children:Object(n.jsxs)("div",{id:"subtext",style:{marginTop:0},children:[Object(n.jsx)("p",{className:"header",style:{marginTop:0},children:"School Overview"}),Object(n.jsxs)("p",{className:"content",children:["Name: ",this.state.school_name]}),Object(n.jsxs)("p",{className:"content",children:["State: ",this.state.state]}),Object(n.jsx)("p",{className:"content",children:"Institutional control: Public"}),Object(n.jsx)("p",{className:"content",children:"Number of students: 318"}),Object(n.jsx)("p",{className:"content",children:"Graduation rate: 96%"}),Object(n.jsx)("p",{className:"content",children:"College enrollment: 31% at 4-year schools, 15% at 2-year schools"}),Object(n.jsx)("p",{className:"content",children:"Average ACT comp: 22"}),Object(n.jsx)("p",{className:"content",children:"Average SAT CR+M: 1050"}),Object(n.jsx)("p",{className:"content",children:"% free/reduced lunch: 67%"}),Object(n.jsx)("p",{className:"content",children:"% limited English prof.: 5%"}),Object(n.jsx)("p",{className:"content",children:"# AP courses offered: 5"}),Object(n.jsx)("p",{className:"content",children:"% who get 3+ on APs: 27%"}),Object(n.jsx)("p",{className:"content",style:{marginTop:"12px",marginBottom:"12px"}})," ",Object(n.jsx)("p",{className:"header",children:"School Profile"})]})})})})]}),Object(n.jsxs)(A.a,{children:[Object(n.jsx)(A.a.Header,{style:{background:"white",paddingLeft:0,paddingRight:0,borderTop:"1px solid black"},children:Object(n.jsxs)(y.a.Toggle,{as:S.a,style:{color:"black",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontSize:"18px",alignItems:"center"},variant:"link",eventKey:"1",onClick:function(){return e.setState({workSectionOpened:!e.state.workSectionOpened},(function(){e.collapsibleToggled(1),e.state.workSectionOpened&&e.setState({educationSectionOpened:!1,miscSectionOpened:!1})}))},children:["Work Experience",Object(n.jsx)("img",{id:"toggle_icon",src:this.state.workSectionOpened?C("minus_icon"):C("plus_icon"),alt:"toggle icon"})]})}),Object(n.jsx)(y.a.Collapse,{eventKey:"1",children:Object(n.jsx)(A.a.Body,{children:Object(n.jsx)("img",{src:C("tier1_app1")})})})]}),Object(n.jsxs)(A.a,{children:[Object(n.jsx)(A.a.Header,{style:{background:"white",paddingLeft:0,paddingRight:0,borderTop:"1px solid black"},children:Object(n.jsxs)(y.a.Toggle,{as:S.a,style:{color:"black",width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-between",fontSize:"18px",alignItems:"center"},variant:"link",eventKey:"2",onClick:function(){return e.setState({miscSectionOpened:!e.state.miscSectionOpened},(function(){e.collapsibleToggled(2),e.state.miscSectionOpened&&e.setState({educationSectionOpened:!1,workSectionOpened:!1})}))},children:["Miscellaneous",Object(n.jsx)("img",{id:"toggle_icon",src:this.state.miscSectionOpened?C("minus_icon"):C("plus_icon"),alt:"toggle icon"})]})}),Object(n.jsx)(y.a.Collapse,{eventKey:"2",children:Object(n.jsx)(A.a.Body,{children:Object(n.jsxs)("div",{className:"votingblock",children:[Object(n.jsx)(N,{sectionName:"misc",recordActivity:this.recordActivity}),Object(n.jsxs)("div",{className:"notes",children:["Other:",Object(n.jsx)("ul",{children:this.state.misc.map((function(t,s){return Object(n.jsx)("li",{children:e.replaceGenderOptions(t)},s)}))})]})]})})})]})]})]})})}):Object(n.jsx)("h1",{children:"Loading..."})}}]),s}(i.a.Component);function C(e){return"".concat("/online-survey-digital-trace-data","/images/").concat(e,".png")}function T(){var e=Object(a.useState)([]),t=Object(w.a)(e,2),s=t[0],i=t[1],c=function(e,t){var a="/online-survey-digital-trace-data/#/".concat(e,"/").concat(t,"/0sampleResponseIDstudy").concat(e),c="".concat(e).concat(t),r=Object(n.jsx)("iframe",{height:"630px",width:"100%",src:a,title:c},c);i([].concat(Object(f.a)(s),[r]))};return Object(n.jsxs)("div",{className:"LandingPage container",children:[Object(n.jsx)("h1",{children:"Pretend this is the Qualtrics Survey"}),Object(n.jsx)("h2",{children:"You'll have some questions"}),Object(n.jsx)("p",{children:"And information and such"}),Object(n.jsx)("p",{children:"And then you can embed the Digital Trace Data page."}),Object(n.jsx)("p",{children:"By default, we are manipulating candidate gender and parenthood status."}),Object(n.jsx)("p",{children:"There are two resumes. Here's Candidate 1."}),Object(n.jsx)("h3",{children:"First Resume"}),Object(n.jsx)("button",{onClick:function(){return c(1,1)},children:"Generate Candidate 1 resume"}),s.length>=1&&s[0],Object(n.jsx)("h3",{children:"Second Resume"}),Object(n.jsx)("p",{children:"And now Candidate 2."}),Object(n.jsx)("button",{onClick:function(){return c(1,2)},children:"Generate Candidate 2 resume"}),s.length>=2&&s[1],Object(n.jsx)("h2",{children:"Downloading the Data"}),Object(n.jsxs)("p",{children:["Once you've run your study, you can download the data in CSV format at"," ",Object(n.jsx)("a",{href:"#/admin",children:"/admin"}),". In this demo, you can download the data no matter what password you put in."]})]})}var E=s(53),P=s.n(E),D=s(44),I=s.n(D),_=(s(50),function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;Object(u.a)(this,s),(n=t.call(this,e)).state={showPasswordErrorMessage:!1,isAuthenticated:!1,typedText:"",userIDs:[],resumeCSVurl:null,activitiesCSVurl:null},n.DATABASE=x.firestore(),n.resumeContent=[],n.activityContent=[];var a=document.getElementById("root");return I.a.setAppElement(a),n}return Object(m.a)(s,[{key:"handleChange",value:function(e){this.setState({showPasswordErrorMessage:!1}),this.setState({typedText:e.target.value})}},{key:"submitPassword",value:function(){"it's so so secret"===this.state.typedText?(this.setState({isAuthenticated:!0}),this.fetchData()):this.setState({showPasswordErrorMessage:!0,isAuthenticated:!1})}},{key:"fetchData",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t,s,n=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=null,e.next=5;break;case 5:return e.next=7,this.DATABASE.collection("responseIDs").get();case 7:s=e.sent,t=s.docs.map((function(e){return e.id}));case 9:t.length>0&&this.setState({userIDs:t},(function(){var e=t.map((function(e){return Promise.all([n.getResumeContent(e,1),n.getResumeContent(e,2)])}));Promise.all(e).then((function(){n.setState({resumeCSVurl:n.createCSV(n.resumeContent)})})).catch((function(e){console.error("Error fetching resumes:",e)}));var s=t.map((function(e){return Promise.all([n.getActivityContent(e,1),n.getActivityContent(e,2)])}));Promise.all(s).then((function(){n.setState({activitiesCSVurl:n.createCSV(n.activityContent)})})).catch((function(e){console.error("Error fetching activity:",e)}))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getResumeContent",value:function(e,t){var s=this;return this.DATABASE.collection("responseIDs").doc(e).collection("values shown").doc("resume ".concat(t)).get().then((function(n){n.exists?s.resumeContent.push(Object(o.a)({responseID:e,resumeNum:t},n.data())):console.log("No such document!")})).catch((function(e){console.error("Error getting document:",e)}))}},{key:"getActivityContent",value:function(e,t){var s=this;return this.DATABASE.collection("responseIDs").doc(e).collection("activityData_resume".concat(t)).get().then((function(n){n.forEach((function(n){s.activityContent.push(Object(o.a)({responseID:e,resumeNum:t,activityID:n.id},n.data()))}))}))}},{key:"createCSV",value:function(e){var t=P.a.unparse(e),s=new Blob([t],{type:"text/csv"});return URL.createObjectURL(s)}},{key:"render",value:function(){var e=this;return this.state.isAuthenticated?Object(n.jsx)("div",{className:"overall",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)("div",{className:"title",children:"Download Data"}),!this.state.activitiesCSVurl&&!this.state.resumeCSVurl&&Object(n.jsx)("p",{children:"Processing..."}),this.state.activitiesCSVurl&&Object(n.jsx)("div",{className:"horizontal",id:"big",children:Object(n.jsx)("a",{href:this.state.activitiesCSVurl,download:"activity_data.csv",children:"Activity Data"})}),this.state.resumeCSVurl&&Object(n.jsx)("div",{className:"horizontal",id:"big",children:Object(n.jsx)("a",{href:this.state.resumeCSVurl,download:"resume_data.csv",children:"Resume Data"})})]})}):Object(n.jsx)(I.a,{className:"modal_dtp",isOpen:!this.state.isAuthenticated,children:Object(n.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.submitPassword()},children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{htmlFor:"password",children:"Enter Password:"}),Object(n.jsx)("input",{type:"password",id:"password",onChange:this.handleChange.bind(this),value:this.state.typedText,autoFocus:!0}),Object(n.jsx)("button",{type:"submit",children:"Submit"})]}),this.state.showPasswordErrorMessage&&Object(n.jsx)("div",{id:"red",children:"Invalid password. Please re-enter."})]})})}}]),s}(i.a.Component)),V=_,M=s(74),R=function(e){Object(p.a)(s,e);var t=Object(b.a)(s);function s(e){var n;Object(u.a)(this,s),(n=t.call(this,e)).activityCounter=1,n.recordActivity=n.recordActivity.bind(Object(j.a)(n)),n.DATABASE=x.firestore();var a=document.location.hash;return n.studyVersion=parseInt(a.split("/")[1]),n.resumeVersion=parseInt(a.split("/")[2]),n.qualtricsUserId=a.split("/")[3],console.log("qualtricsUserId: "+n.qualtricsUserId),n}return Object(m.a)(s,[{key:"recordActivity",value:function(){var e=Object(h.a)(d.a.mark((function e(t,s,n){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this.activityCounter.toString().padStart(5,"0"),this.activityCounter=this.activityCounter+1,i=M(),this.DATABASE.collection("responseIDs").doc(this.qualtricsUserId).collection("activityData_resume"+this.resumeVersion.toString()).doc(a).set({category:t,description:n,value:s,timestamp:new Date(i),timeEpoch:Number(i.format("x")),timeReadable:i.tz("America/Los_Angeles").format("M-D-YY h:mm:ssa")}),console.log(a+" "+t+": "+s+" -- "+n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,s,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.recordActivity("loading","accessed","App mounted")}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{children:Object(n.jsxs)(g.a,{children:[Object(n.jsx)(O.a,{path:"/:studyVersion/:resumeVersion/:qualtricsUserId",render:function(t){return Object(n.jsx)(k,Object(o.a)(Object(o.a)({},t),{},{studyVersion:e.studyVersion,resumeVersion:e.resumeVersion,recordActivity:e.recordActivity,qualtricsUserId:e.qualtricsUserId}))}}),Object(n.jsx)(O.a,{path:"/admin",render:function(){return Object(n.jsx)(V,{})}}),Object(n.jsx)(O.a,{path:"/",exact:!0,render:function(){return Object(n.jsx)(T,{})}})]})})}}]),s}(i.a.Component);r.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(R,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.97b4a8a6.chunk.js.map